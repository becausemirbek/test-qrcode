<html>
  <head>
    <title>Html-Qrcode Demo</title>
    <body>
      <h1>Hello</h1>
      <div id="qr-reader" style="width: 500px"></div>
      <div id="qr-reader-results"></div>
      <form
        target="myFrame"
        method="POST"
        action="https://docs.google.com/forms/u/0/d/e/1FAIpQLScSFTODP2wz7lP-s-DJraOJO6NngkX8eL5-RH4DoYi4QTnMOw/formResponse"
      >
        <input type="hidden" name="entry.843509151" id="qrcode" />
        <input type="hidden" name="entry.1694132655" id="name" />
        <button type="submit" id="submitBtn" disabled>Отправить</button>
      </form>
      <!-- src="https://docs.google.com/forms/u/0/d/e/1FAIpQLScSFTODP2wz7lP-s-DJraOJO6NngkX8eL5-RH4DoYi4QTnMOw/formResponse" -->
      <iframe name="myFrame"></iframe>
    </body>
    <script src="./html5-qrcode.min.js"></script>
    <script>
      function docReady(fn) {
        // see if DOM is already available
        if (
          document.readyState === "complete" ||
          document.readyState === "interactive"
        ) {
          // call on next available tick
          setTimeout(fn, 1);
        } else {
          document.addEventListener("DOMContentLoaded", fn);
        }
      }

      docReady(function () {
        var resultContainer = document.getElementById("qr-reader-results");
        var submitBtn = document.getElementById("submitBtn");

        var qrCodeInp = document.getElementById("qrcode");

        var nameInp = document.getElementById("name");
        var lastResult,
          countResults = 0;
        function onScanSuccess(qrCodeMessage) {
          if (qrCodeMessage !== lastResult) {
            ++countResults;
            lastResult = qrCodeMessage;
            resultContainer.innerHTML += `<div>[${countResults}] - ${qrCodeMessage}</div>`;
          }
          submitBtn.removeAttribute("disabled");
          qrCodeInp.value = lastResult;
          nameInp.value = "Mirba";
        }
        var html5QrcodeScanner = new Html5QrcodeScanner("qr-reader", {
          fps: 10,
          qrbox: 250,
        });
        html5QrcodeScanner.render(onScanSuccess);
        submitBtn.onclick = onSubmit;
      });
    </script>
  </head>
</html>
